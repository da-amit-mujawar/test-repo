# Builds - B2C-Link (IDMS Specialty Database)

This project is a replacement of a Visual Cron job. It enhances 
the main table, and creates additional data views for new build in 
**IDMS Specialty Database: B2C Link (formerly Execureach)**. 

## Pre-processing
The input is generated by MMDB and dropped into lrfsdecom folder 
which is DataSync'd to S3, check file date.
Check ETL UI, decision maker list status = 140, action = new
Trigger AFTER 5-6p ET

## Key Data Elements
* **table primary key:** id
* **order processing keys:** 
bus_abinumber and individual_mc (business contact)
* **alternate match keys:**
company_mc,
consumer_individual_matchcode, consumer_household_matchcode, 
bus_executiveid, bus_contactid, 
cons_familyid, cons_individualid, 
lems, 
bus_emailaddress, cons_emailaddress, 
encrypted email: (md5,sha256,sha1)

## Dependencies and Data Axle Sources
The following Redshift source tables shall be  refreshed weekly, 
unless otherwise noted. These newly created import-dags may be 
used by other Data Axle Specialty databases as needed (except intent_1150).
**Decode tables** are commonly used description fields. 
B2C-Link database is enhanced with these *common description* data collections.
Refer to join in transform and child table views.

1. *county_name*
2. *do_not_call (runs daily - National DNC file)* 
3. *ttlcodeid*
4. *intent_1150 (runs monthly based on source)*
5. *b2c_link_dd (decode tables' source)*
6. *decode_bus_department*
7. *decode_bus_functional_area*
8. *decode_bus_level*
9. *decode_bus_role*
10. *decode_employee_size*
11. *decode_sales_volume*
12. *decode_sic6*
13. *decode_square_footage*

- **Child table Views of decode_xxx tables:** <br/>
1. *child1 - sic_description* <br/>
2. *child2 - bus_location_employment_size_description* <br/>
3. *child3 - bus_corporate_employment_size_Description* <br/>
4. *child4 - bus_location_sales_volume_description* <br/>
5. *child5 - bus_corporate_sales_volume_description* <br/>
6. *child6 - bus_square_footage_description* <br/>
7. *child7 - bus_departmentcode_description* <br/>
8. *child8 - bus_levelcode_description* <br/>
9. *child9 - bus_functionalareacode_description* <br />
10. *child10 - bus_roledode_description* <br/> <br/>
11. *child36 - intent columns* <br/> <br/>

###### Updates:
- 2021.09.29 CB: APOGEE-163 Load B2CLink data to data lake (accessible via Data Bricks)
- 2022.03.10 CB: IDMS-1782 B2C Link Counts Report for Capital One
- 
